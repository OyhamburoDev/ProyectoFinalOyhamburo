"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react"),k=require("makeup-expander"),S=require("../calendar-lAu6VfAb.js"),i=require("../textbox-dUhinDwj.js");require("../icon-TuxfQndO.js");const H=require("classnames"),U=600,V=({className:O,inputPlaceholderText:E="YYYY-MM-DD",a11yOpenPopoverText:T="open calendar",range:o,value:v,rangeEnd:g,defaultValue:D,defaultRangeEnd:R,collapseOnSelect:_,onChange:p=()=>{},onInputChange:M=()=>{},onInputRangeEndChange:P=()=>{},...q})=>{const m=n.useRef(),l=n.useRef(null),[w,d]=n.useState(D||""),[A,u]=n.useState(R||""),f=i.isControlled(v)?v:w,y=i.isControlled(g)?g:A,[s,b]=n.useState(()=>S.dateArgToISO(f)),[c,x]=n.useState(()=>S.dateArgToISO(y)),[C,I]=n.useState(!1),[L,Y]=n.useState(1),B=()=>{I(!0)},z=()=>{I(!1)};n.useEffect(()=>{if(!l.current)return;m.current=new k(l.current,{hostSelector:".ebay-date-textbox--main > .icon-btn",contentSelector:".date-textbox__popover",expandOnClick:!0,autoCollapse:!0}),l.current.addEventListener("expander-expand",B),l.current.addEventListener("expander-collapse",z);const e=()=>{Y(document.documentElement.clientWidth<U?1:2)};return e(),window.addEventListener("resize",e),()=>{var t;(t=m.current)==null||t.destroy(),window.removeEventListener("resize",e)}},[]);const h=(e,t)=>{const r=new Date(e.target.value),a=isNaN(r.getTime())?null:S.toISO(r);t===0?(b(a),d(a||"")):(x(a),u(a||"")),o?p(e,{rangeStart:t===0?a:s,rangeEnd:t===1?a:c}):p(e,{selected:a})},F=(e,{iso:t})=>{if(b(t),d(t),o){const r=s||c,a={rangeStart:t,rangeEnd:r};s&&c?(u(""),x(null),a.rangeEnd=null):r&&(r<t?(b(r),d(r),u(t),x(t),a.rangeStart=r,a.rangeEnd=t):(b(t),d(t),u(r),x(r),a.rangeStart=t,a.rangeEnd=r)),p(e,a)}else p(e,{selected:t});_&&(m.current.expanded=!1)},N=(e,t)=>{t===0?(d(e.target.value),M(e)):(u(e.target.value),P(e))},[W,j]=Array.isArray(E)?E:[E,E];return n.createElement("span",{className:H("date-textbox",O),ref:l},o&&n.createElement(i.EbayTextbox,{value:f,placeholder:W,onInputChange:e=>N(e,0),onBlur:e=>h(e,0)}),n.createElement(i.EbayTextbox,{className:"ebay-date-textbox--main",placeholder:j,value:o?y:f,onInputChange:e=>N(e,o?1:0),onBlur:e=>h(e,o?1:0)},n.createElement(i.EbayTextboxPostfixIcon,{name:"calendar24",buttonAriaLabel:T})),n.createElement("div",{hidden:!C,className:"date-textbox__popover"},n.createElement(S.EbayCalendar,{...q,range:o,interactive:!0,navigable:!0,numMonths:L,selected:s&&c?[s,c]:s||c||void 0,onSelect:F})))};exports.EbayDateTextbox=V;
