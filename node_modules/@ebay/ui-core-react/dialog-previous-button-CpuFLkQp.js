"use strict";const e=require("react"),ee=require("react-remove-scroll"),_=require("classnames"),te=require("makeup-screenreader-trap"),ne=require("makeup-keyboard-trap"),ae=require("./icon-TuxfQndO.js"),oe=require("./common/random-id/index.js"),re=require("./ebay-dialog-base/components/animation/index.js"),z=require("./ebay-dialog-base/components/dialog-header/index.js"),K=require("./ebay-dialog-base/components/dialog-footer/index.js"),ce=require("./icon-button-Cwaj-eT9.js");function G(a){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(a){for(const r in a)if(r!=="default"){const l=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:()=>a[r]})}}return n.default=a,Object.freeze(n)}const q=G(te),R=G(ne),h=({children:a})=>e.createElement(e.Fragment,null,a),le=({baseEl:a="div",classPrefix:n="drawer-dialog",windowClass:r,windowType:l,mainId:b,top:f,header:o,buttonPosition:c="right",children:p,ariaLabelledby:v,a11yCloseText:B,onCloseBtnClick:g=()=>{},footer:E,actions:d,onScroll:L,open:t=!1,onOpen:D=()=>{},onBackgroundClick:T=()=>{},ignoreEscape:J,closeButton:M,previousButton:Q,isModal:y,role:U="dialog",focus:I,transitionElement:V,animated:O,closeButtonClass:X,...S})=>{var H;const A=e.useRef(null),i=e.useRef(null),j=e.useRef(null),[Y,Z]=e.useState("");e.useEffect(()=>{Z(oe.randomId())},[]),e.useEffect(()=>{let s;const u=m=>{i.current&&!i.current.contains(m.target)&&T(m)};return t&&c!=="hidden"&&(s=window.setTimeout(()=>{document.addEventListener("click",u,!1)})),()=>{clearTimeout(s),document.removeEventListener("click",u,!1)}},[T,t]),e.useEffect(()=>(t&&y?(q.trap(i.current),R.trap(i.current)):(q.untrap(),R.untrap()),()=>{q.untrap(),R.untrap()}),[t,y]),re.useDialogAnimation({open:t,classPrefix:n,transitionElement:V,dialogRef:A,dialogWindowRef:i,enabled:O,onTransitionEnd:()=>C(t)});const w=s=>{!J&&s.key==="Escape"&&(s.stopPropagation(),g(s))};e.useEffect(()=>{O||C(t),t&&D()},[t]);function C(s){var u,m;if(s)return I?(u=I.current)==null||u.focus():y&&((m=j.current)==null||m.focus()),document.addEventListener("keydown",w,!1),()=>document.removeEventListener("keydown",w,!1)}const F=c!=="hidden"&&e.createElement("button",{ref:j,className:_("icon-btn",X,`${n}__close`,{"icon-btn--transparent":n==="toast-dialog"}),type:"button","aria-label":B,onClick:g},M||e.createElement(ae.EbayIcon,{name:"close16"})),x=l?`${n}__${l}-window`:`${n}__window`,W=((H=o==null?void 0:o.props)==null?void 0:H.id)||`dialog-title-${Y}`,P=v||W,N=o?e.cloneElement(o,{...o.props,id:W}):null;return e.createElement(a,{...S,"aria-labelledby":P,"aria-modal":"true",role:U,hidden:!t,className:_(n,S.className),"aria-live":y?void 0:"polite",ref:A,onKeyDown:w},e.createElement("div",{className:_(x,r),ref:i},f,N&&e.createElement("div",{className:`${n}__header`},Q,c==="right"&&N,c!=="bottom"&&F,(c==="left"||c==="hidden")&&N),e.createElement("div",{id:b,className:`${n}__main`,onScroll:L},p),d?e.createElement("div",{className:`${n}__actions`},d):null,E||c==="bottom"?e.createElement("div",{className:`${n}__footer`},E,c==="bottom"&&F):null))},se=({isModal:a,open:n,children:r,animated:l=!0,...b})=>{const f=a!==!1,o=e.Children.toArray(r),c=o.find(t=>t.type===z),p=o.find(t=>t.type===K),v=o.find(t=>t.type===$),B=o.find(t=>t.type===h),g=o.find(t=>t.type===k),E=o.filter(t=>![z,K,h,$,k].some(D=>D===t.type)),d=e.createElement(le,{...b,open:n,isModal:f,header:c,footer:p,actions:v,closeButton:B,previousButton:g,animated:l},E);return l||n?f?e.createElement(ee.RemoveScroll,{enabled:n},d):d:null},$=({children:a})=>e.createElement(e.Fragment,null,a),k=({className:a,icon:n,...r})=>e.createElement(ce.EbayIconButton,{...r,icon:n||"chevronLeft16",className:_(a,"lightbox-dialog__prev")});exports.DialogBaseWithState=se;exports.EbayDialogActions=$;exports.EbayDialogCloseButton=h;exports.EbayDialogPreviousButton=k;
