"use strict";const a=require("react"),ue=require("./icon-button-Cwaj-eT9.js"),de=require("classnames");function Ue(n){const o=new Intl.Locale(n);return o.weekInfo?o.weekInfo.firstDay:0}function ve(n){const o=Ue(n),i=new Intl.DateTimeFormat(n,{weekday:"short"}),d=new Date(2022,9,2+o),A=[...Array(7)].map(()=>{const k=i.format(d);return d.setDate(d.getDate()+1),k});return{firstDayOfWeek:o,weekdayLabels:A}}function Ae(n){if(n)return/^\d\d\d\d-\d\d-\d\d$/g.test(n)?n:u(new Date(n))}function u(n){if(!isNaN(n.getTime()))return n.toISOString().slice(0,10)}function v(n){return new Date(n)}function H(n,o){const i=v(n);return i.setUTCDate(i.getUTCDate()+o),u(i)}function fe(n){return n||navigator.language}const Fe={ArrowRight:1,ArrowLeft:-1,ArrowDown:7,ArrowUp:-7},Re=({selected:n,numMonths:o=1,navigable:i,interactive:d,range:A,locale:k,disableBefore:g,disableAfter:I,disableWeekdays:B,disableList:G,a11ySelectedText:me="selected",a11yRangeStartText:ye="start of range",a11yInRangeText:ge="in range",a11yRangeEndText:Ie="end of range",a11ySeparator:J="-",a11yTodayText:De="today",a11yDisabledText:Se="inactive",getA11yShowMonthText:Q=T=>`Show ${T}`,linkBuilder:X,onMonthChange:Z=()=>{},onFocus:we=()=>{},onSelect:Ee=()=>{}})=>{const T=u(new Date),{firstDayOfWeek:Oe,weekdayLabels:Te}=ve(fe(k)),ee=a.useRef(null),[m,F]=a.useState(0),[te,ne]=a.useState(null),[D,h]=a.useState(T),R=a.useRef(T),S=e=>{const t=v(R.current);return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth()+e))},w=()=>u(S(m)),E=()=>{const e=v(R.current);return u(new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth()+m+(o||1),0)))};a.useEffect(()=>{if(n){const e=Array.isArray(n)?n:[n],t=w(),r=E();e.find(f=>f>=t&&f<=r)===void 0&&(R.current=e[0],F(0))}},[n]);const be=()=>{if(n&&A){let e,t;if(Array.isArray(n)?[e,t]=n:te&&(e=n,t=te),e&&t){const[r,s]=[e,t].sort();return{rangeStart:r,rangeEnd:s}}}return{rangeStart:null,rangeEnd:null}},p=e=>new Intl.DateTimeFormat(fe(k),{month:"long",year:"numeric"}).format(new Date(e.getUTCFullYear(),e.getUTCMonth())),_=e=>g&&e<g||I&&e>I||B&&B.includes(v(e).getUTCDay())||G&&G.includes(e),ae=()=>{let e=w();const t=E();for(;e<=t&&_(e);)e=H(e,1);return e>t?null:e},re=()=>{let e=E();const t=w();for(;e>=t&&_(e);)e=H(e,-1);return e<t?null:e},b=e=>{h(e),setTimeout(()=>{var r;const t=(r=ee.current)==null?void 0:r.querySelector(`[data-iso="${e}"]`);t==null||t.focus()})},N=e=>{if(g&&w()<=g)return!1;F(s=>s-1);let t=D;const r=re();return r&&r<D&&(t=r,h(r)),e&&b(t),Z({iso:u(S(m))}),!0},L=e=>{if(I&&E()>=I)return!1;F(s=>s+1);let t=D;const r=ae();r&&r>D&&(t=r,h(r)),e&&b(t),Z({iso:u(S(m+(o||1)))})},ke=e=>{const t=Fe[e.key];if(t){e.preventDefault();let r=7,s=D;do s=H(s,t);while(r-- >0&&_(s));if(r>0){const f=w(),O=E();s<f?i?N():s=f:s>O&&(i?L():s=O),b(s)}}else switch(e.key){case"PageUp":N(!0);break;case"PageDown":L(!0);break;case"Home":b(ae());break;case"End":b(re());break}},he=(e,t)=>{Ee(e,{iso:t})},se=(e,t)=>{ne(t),h(t),we(e,{iso:t})},ce=()=>{ne(null)},{rangeStart:V,rangeEnd:x}=be(),pe=e=>!(!V||!x||e<V||e>x),oe=[...Array(o)].map((e,t)=>S(m+t));return a.createElement("div",{className:"calendar",ref:ee},i&&a.createElement("div",{className:"calendar__header"},a.createElement("div",{className:"calendar__header--inner"},a.createElement(ue.EbayIconButton,{transparent:!0,size:"small",icon:"chevronLeft24",disabled:g&&w()<=g,"aria-label":Q(p(S(m-1))),onClick:()=>N()}),oe.map((e,t)=>a.createElement("h3",{key:t},p(e))),a.createElement(ue.EbayIconButton,{transparent:!0,size:"small",icon:"chevronRight24",disabled:I&&E()>=I,"aria-label":Q(p(S(m+o))),onClick:()=>L()}))),a.createElement("div",{className:"calendar__body"},oe.map((e,t)=>{const r=(e.getUTCDay()-Oe+7)%7,s=e.getUTCFullYear(),f=e.getUTCMonth(),O=new Date(s,f+1,0).getDate(),_e=[...Array(Math.ceil((r+O)/7))];return a.createElement("div",{key:t,className:"calendar__month"},a.createElement("table",{onKeyDown:ke},a.createElement("caption",null,p(e)),a.createElement("thead",null,a.createElement("tr",null,Te.map(M=>a.createElement("th",{key:M,scope:"col"},M)))),a.createElement("tbody",null,_e.map((M,Y)=>{let $=Y*7-r+1,q=$+6;const P=[];Y===0&&r!==0?($=1,P.push(a.createElement("td",{key:"pre-column",colSpan:r}))):q>O&&(q=O);for(let y=$;y<=q;y++){const c=u(new Date(Date.UTC(s,f,y))),W=c===T,j=Array.isArray(n)?n.some(l=>l===c):n===c,z=c===V,le=pe(c),K=c===x,C=_(c),U=["",j&&me,z&&ye,!z&&!K&&le&&ge,K&&Ie,!d&&W&&De,!d&&C&&Se].filter(l=>typeof l!="boolean"||l!==!1),ie=!d&&!C&&X&&X(c),Ce=ie?"a":"span";P.push(a.createElement("td",{key:y,className:de({"calendar__cell--selected":j,"calendar__range--start":z,calendar__range:le,"calendar__range--end":K})},d?a.createElement("button",{disabled:C,"aria-label":U.length>1?`${y}${U.join(J)}`:void 0,tabIndex:D!==c?-1:void 0,"aria-current":W?"date":void 0,"aria-pressed":j?"true":void 0,onClick:l=>he(l,c),onFocus:l=>se(l,c),onMouseOver:l=>se(l,c),onMouseOut:l=>ce(),onBlur:()=>ce(),"data-iso":c},y):a.createElement(Ce,{className:de({"calendar__cell--disabled":C,"calendar__cell--current":W}),href:ie},y,U.length>1&&a.createElement("span",{className:"clipped"},U.join(J)))))}return a.createElement("tr",{key:Y},P)}))))})))};exports.EbayCalendar=Re;exports.dateArgToISO=Ae;exports.toISO=u;
