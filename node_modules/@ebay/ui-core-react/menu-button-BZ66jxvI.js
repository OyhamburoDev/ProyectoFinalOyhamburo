"use strict";const e=require("react"),s=require("classnames"),l=require("./common/component-utils/utils/index.js"),K=require("./common/event-utils/index.js"),T=require("./common/random-id/index.js"),D=require("./button-DGuEBUDJ.js"),R=require("./icon-TuxfQndO.js"),U=require("./icon-button-Cwaj-eT9.js"),z=require("./menu-_LzP6yje.js"),H=require("./ebay-fake-menu/menu-item/index.js"),p=H,y=({className:a,...r})=>e.createElement("hr",{...r,className:s(a,"menu-button__separator"),role:"separator"}),_=({children:a})=>e.createElement(e.Fragment,null,a),P=({a11yText:a,noToggleIcon:r,fixWidth:k,reverse:B,variant:i,expanded:M=!1,className:I,onCollapse:q=()=>{},onExpand:v=()=>{},onMouseDown:F=()=>{},onSelect:w=()=>{},text:d="",children:c,...x})=>{const[o,m]=e.useState(M),[b,N]=e.useState(),u=e.useRef(),f=l.findComponent(c,R.EbayIcon),C=l.findComponent(c,_)||(f?e.createElement("span",null,d):d),S=l.filterByType(c,[p,y]);e.useEffect(()=>{const n=t=>{u.current&&!u.current.contains(t.currentTarget)&&m(!1)};return o?(v(),setTimeout(()=>{document.addEventListener("click",n,!1)})):o===!1&&q(),()=>document.removeEventListener("click",n,!1)},[o]),e.useEffect(()=>{N(T.randomId())},[]);const h=n=>{K.handleEscapeKeydown(n,()=>{var t;m(!1),(t=u.current)==null||t.focus()})},L=s("fake-menu-button__menu",{"menu-button__menu--fix-width":k,"menu-button__menu--reverse":B}),E={ref:u,className:"fake-menu-button__button","aria-expanded":!!o,"aria-haspopup":!0,"aria-label":a,"aria-controls":b,onClick:()=>m(!o),...x};return e.createElement("span",{className:s("fake-menu-button",I)},i==="overflow"?e.createElement(U.EbayIconButton,{icon:"overflowHorizontal24",...E}):e.createElement(D.EbayButton,{variant:i==="form"?"form":void 0,bodyState:r?void 0:"expand",...E},f,C),o&&e.createElement(z.EbayFakeMenu,{className:L,id:b,tabIndex:-1,onKeyDown:h,onSelect:w},S.map((n,t)=>e.cloneElement(n,{...n.props,onMouseDown:g=>{F(g,{index:t})},className:s(n.props.className,"fake-menu-button__item"),key:t,autoFocus:t===0}))))};exports.EbayFakeMenuButtonItem=p;exports.EbayFakeMenuButtonLabel=_;exports.EbayMenuButton=P;exports.EbayMenuButtonSeparator=y;
