"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("react");function m({open:t,classPrefix:n,transitionElement:r,dialogRef:i,dialogWindowRef:c,enabled:a,onTransitionEnd:o}){const s=f.useRef(t);f.useLayoutEffect(()=>{if(!a)return;let e=[c,i];r==="window"?e=[c]:r==="root"&&(e=[i]);let u;return t?u=l({dialog:i,waitFor:e,classPrefix:n,onTransitionEnd:o}):s.current!==t&&(u=A({dialog:i,waitFor:e,classPrefix:n,onTransitionEnd:o})),s.current=t,()=>{u&&u()}},[t,a])}function l({dialog:t,waitFor:n,classPrefix:r,onTransitionEnd:i}){return w(t,n,`${r}--show`,i)}function A({dialog:t,waitFor:n,classPrefix:r,onTransitionEnd:i}){return w(t,n,`${r}--hide`,i)}function w(t,n,r,i){if(!t.current||!r)return;let c=0;const a=n?n.length:0,o=`${r}-init`;return t.current.classList.add(o),v(()=>{t.current&&(t.current.classList.add(r),t.current.classList.remove(o),n.forEach(s=>{const e=()=>{var u,d;++c===a&&((u=t.current)==null||u.classList.remove(r),i(),(d=s.current)==null||d.removeEventListener("transitionend",e))};s.current.addEventListener("transitionend",e,{once:!0})}))})}function v(t){let n,r;return window.requestAnimationFrame?(n=window.requestAnimationFrame(()=>{n=window.requestAnimationFrame(t)}),r=window.cancelAnimationFrame):(n=window.setTimeout(t,26),r=window.clearTimeout),()=>{n&&(r(n),n=void 0)}}exports.useDialogAnimation=m;
